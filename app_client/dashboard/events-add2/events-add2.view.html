<div class="container app-container">
  <h1>Añadir un nuevo evento</h1>
  <dashboard-navigation></dashboard-navigation>
  <div role="alert" ng-show="vm.formError" class="alert alert-danger">{{ vm.formError }}</div>
  <h3>Ingrese datos del evento</h3>
  <form class="form-horizontal" ng-submit="vm.onSubmit()">

    <h4>1. Datos generales</h4>
    <div class="form-group">
      <label class="control-label col-sm-2" for="title">Título del Evento:</label>
      <div class="col-sm-10">
        <input type="name" class="form-control" id="title" placeholder="Ingrese el título del evento" ng-model="vm.newEvent.title">
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Categoría:</label>
      <div class="col-sm-10">
        <select class="form-control" id="category" ng-model="vm.newEvent.category">
          <option ng-repeat="cat in vm.categories" value="{{cat.value}}">{{cat.name}}</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Descripción:</label>
      <div class="col-sm-10">
        <textarea class="form-control" rows="5" placeholder="Ingrese una descripción del evento" ng-model="vm.newEvent.description"></textarea>
      </div>
    </div>

    <h4>2. Fecha y duración</h4>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Fecha de Inicio:</label>
      <div class="col-sm-4">
        <div class="input-group">
          <input type="text"
            class="form-control"
            uib-datepicker-popup="{{vm.calendarFormat}}"
            ng-model="vm.eventStartDate"
            is-open="vm.isCalendarOpen"
            datepicker-options="vm.calendarOptions"
            ng-required="true"
            close-text="Cerrar"/>
          <span class="input-group-btn">
            <button type="button"
            class="btn btn-default"
            ng-click="vm.openCalendar()">
              <i class="glyphicon glyphicon-calendar"></i>
            </button>
          </span>
        </div>
        <!--<input class="form-control" type="datetime-local" value="{{vm.newEvent.when.start}}" />-->
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Hora de Inicio:</label>
      <div class="col-sm-4">
        <div class="input-group">
          <div
            uib-timepicker
            ng-model="vm.eventStartDate"
            ng-change="vm.changedTime()"
            hour-step="vm.hstep"
            minute-step="vm.mstep"
            show-meridian="vm.ismeridian">
          </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Duración:</label>
      <div class="col-sm-4">
        <div class="input-group">
          <div
            uib-timepicker
            ng-model="vm.eventDuration"
            ng-change="vm.durationChanged()"
            hour-step="vm.hstep"
            minute-step="vm.mstep"
            show-meridian="vm.durationIsMeridian">
          </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Horario del evento:</label>
      <div class="col-sm-10">
        Inicia: {{ vm.eventStartDate | amDateFormat:'dddd D [de] MMMM [de] YYYY [a las] h:mm a' }} <br/>
        Termina: {{ vm.eventEndDate | amDateFormat:'dddd D [de] MMMM [de] YYYY [a las] h:mm a' }} <br/>
      </div>
    </div>
    <h4>3. Ubicación</h4>
    <div class="form-group">
      <label class="control-label col-sm-2" for="name">Dirección del Evento:</label>
      <div class="col-sm-10">
        <input type="name" class="form-control" id="name" placeholder="Ingrese la ubicación del evento" ng-model="vm.newEvent.where.address">
      </div>
      <div class="col-sm-10 col-sm-offset-2">
        <ui-gmap-google-map
          center='vm.map.center'
          zoom='vm.map.zoom'
          events="vm.map.events">
          <ui-gmap-marker
            idKey="vm.cursor.id"
            coords="vm.cursor.location">
          </ui-gmap-marker>
        </ui-gmap-google-map>
      </div>
    </div>
    <h4>4. Costo</h4>
    <div class="form-group">
      <label class="control-label col-sm-2" for="cost-text">Costo del evento:</label>
      <div class="col-sm-2">
        <input type="text" class="form-control" id="cost-text" placeholder="Texto" ng-model="vm.newCost.text">
      </div>
      <div class="col-sm-2">
        <input type="number" class="form-control" id="cost-value" placeholder="Texto" ng-model="vm.newCost.value">
      </div>
      <div class="col-sm-1">
        <button class="btn btn-default" ng-click="vm.addCost()" type="button">+</button>
      </div>
      <div class="col-sm-5">
        <div ng-show="vm.newEvent.cost == ''">
          <b>Entrada Liberada</b><br/>Si el evento tiene costo, añádalo utilizando el formulario a la izquierda.
        </div>
        <table class="col-md-12 table table-stripped table-condensed" ng-show="vm.newEvent.cost != ''">
          <thead>
            <tr>
            <th>Ítem</th>
            <th>Valor</th>
            <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="cost in vm.newEvent.cost">
              <td>{{cost.text}}</td>
              <td>$ {{cost.value}}</td>
              <td>
                <button class="btn btn-default" ng-click="vm.removeCost(cost)" type="button">-</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <h4>5. Confirmación</h4>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-default">Registrar Evento</button>
      </div>
    </div>

  </form>
</div>
